version: "3"
services:
    web:
        image: bheemboy/cards56web
        container_name: cards56web
        restart: unless-stopped
        dns:
            - 1.1.1.1
        ports:
            - "5000:80"
            - "5001:443"
        environment:
            - ASPNETCORE_URLS=https://+;http://+
            - ASPNETCORE_Kestrel__Certificates__Default__Password=crypticpassword
            - ASPNETCORE_Kestrel__Certificates__Default__Path=/https/cards56web.pfx
        healthcheck:
            test: curl --fail -s https://localhost:5001/ || exit 1
            interval: 1m30s
            timeout: 10s
            retries: 3
        volumes:
            - ~/.aspnet/https:/https:ro
